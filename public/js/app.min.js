"use stict";var app=angular.module("roombah-battle",[]);app.controller("mainController",function(o,t,n,r){var i=this;o.on("top",function(o){i.top=o}),o.on("right",function(o){i.right=o}),t.roombah={},t.roombah.top=0,t.roombah.right=0,t.roombah.goingDown=!0,t.roombah.goingRight=!1,t.roombah.color="violet",r(function(){t.roombah=n.calculateMovement(t.roombah)},20),o.on("otherRoombahs",function(o){roombahIndex=i.roombahNames.indexOf(o.name),roombahIndex>-1?i.otherRoombahs[roombahIndex]=o:(i.roombahNames.unshift(o.name),i.otherRoombahs.unshift(o))}),t.$watch("roombah.top",function(n){o.emit("otherRoombahs",t.roombah)}),t.$watch("roombah.right",function(n){o.emit("otherRoombahs",t.roombah)}),i.roombahNames=[],i.otherRoombahs=[]}),app.factory("positionService",function(){var o={},t=function(o){o.goingDown=!o.goingDown},n=function(o){o.goingRight=!o.goingRight},r=function(o){(0===o.top||270===o.top)&&t(o),(0===o.right||290===o.right)&&n(o)};return o.calculateMovement=function(o){return o.goingDown?o.top++:o.top--,o.goingRight?o.right--:o.right++,r(o),o},o}),app.controller("roombahController",function(o){}),app.directive("roombah",function(o){return{restrict:"E",template:'<div class="roombah">{{ roombah.name }}</div>',replace:!0,bindToController:{top:"=",right:"=",color:"=",name:"="},controller:"roombahController",controllerAs:"rmbCtrl",link:function(t,n,r){t.$watch(r.top,function(t){n.css("top",t+"px"),o.emit("top",t)}),t.$watch(r.right,function(t){n.css("right",t+"px"),o.emit("right",t)}),t.$watch(r.color,function(o){n.css("backgroundColor",o)})}}}),app.factory("socket",function(o){var t=io.connect();return service={on:function(n,r){t.on(n,function(){var n=arguments;o.$apply(function(){r.apply(t,n)})})},emit:function(n,r,i){t.emit(n,r,function(){var n=arguments;o.$apply(function(){i&&i.apply(t,n)})})}},service});